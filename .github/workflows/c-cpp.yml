- name: Compile Project
        run: |
          set -e
          
          mkdir -p build
          
          SDK_PATH=$(xcrun --sdk iphoneos --show-sdk-path)
          
          echo "üîç Searching for source files..."
          SOURCES=$(find . \( -name "*.cpp" -o -name "*.mm" -o -name "*.c" \) \
            | grep -v "Dobby/tests" \
            | grep -v "Dobby/example")

          if [ -z "$SOURCES" ]; then
            echo "‚ùå No source files found!"
            exit 1
          fi
          
          echo "üìÇ Source files:"
          echo "$SOURCES"
          
          echo "üöÄ Compiling..."
          
          clang++ -v \
            -arch arm64 -dynamiclib -std=c++17 \
            -isysroot "$SDK_PATH" \
            -miphoneos-version-min=14.0 \
            -fobjc-arc \
            -Wno-error \
            -Wno-deprecated-declarations \
            -Wno-unused-variable \
            -Wno-unused-function \
            -Wno-unused-but-set-variable \
            -ferror-limit=0 \
            \
            -I. \
            -I./SDK \
            -I./KittyMemory \
            -I./ESP \
            -IDobby/include \
            \
            $SOURCES \
            \
            -framework Foundation \
            -framework UIKit \
            -framework CoreGraphics \
            -framework QuartzCore \
            -framework Security \
            \
            -lc++ \
            -ldl \
            \
            -o build/ShadowCheats.dylib
          
          echo "‚úÖ Build Finished Successfully"
